# KNNSimulator

This repository contains a simulator written in C language to evaluate the performance of the K-Nearest Neighbors clustering algorithm in different platforms, the KNNSim.

1. [Content of this repository](#content-of-this-repository)

## Content of this repository

The content of this repository is as follows:
* `./` contains the source of the simulator. To compile:
  - **Linux:** type `make`;
  - **macOS:** define `MACOS=1` as a bash variable and type `make`.
* `./datasets/` contains the raw data of seven datasets that were download from [UCI Machine Learning Repository](https://archive.ics.uci.edu/ml/index.php) and precompiled binaries that can be used out of the box with KNNSim:
  * [Iris](https://archive.ics.uci.edu/ml/datasets/Iris)
  * [Wine](https://archive.ics.uci.edu/ml/datasets/Wine)
  * [Breast Cancer Wisconsin (Diagnostic)](https://archive.ics.uci.edu/ml/datasets/Breast+Cancer+Wisconsin+%28Diagnostic%29)
  * [Car Evaluation](https://archive.ics.uci.edu/ml/datasets/Car+Evaluation)
  * [Abalone](https://archive.ics.uci.edu/ml/datasets/Abalone)
  * [Human Activity Recognition Using Smartphones](https://archive.ics.uci.edu/ml/datasets/Human+Activity+Recognition+Using+Smartphones)
  * [Bank Marketing](https://archive.ics.uci.edu/ml/datasets/Bank+Marketing)
  * [Poker Hand](https://archive.ics.uci.edu/ml/datasets/Poker+Hand)
  * Additionally, there is source code on `./datasets/8_dataset_gen` to generate random datasets. This tool is, however, unnecessary since KNNSim generates random datasets natively whenever a binary file is not provided.
* `./sim/` contains some experimental results extracted from several runnings on different systems.

## Usage

To know how to use KNNSim, just type `./knnsim -h` after compiling the software. It will produce:
```
[USAGE]: ./knnsim <#control> <#classify> <#features> <#classes> <#neighbors> [options]

    #control : size of the control universe
   #classify : number of samples to be classified
   #features : number of features per each sample
    #classes : number of different classes in the control universe (smaller than #control)
  #neighbors : (k) number of closest neighbors needed to classify a sample

[options]

           --run-type, -r : specify run-type plain or multithread (default=plain)
  --number-of-threads, -t : specify the number of threads and should be used with -r (default=1)
         --input-file, -f : binary file that includes control samples, classify samples and classes (default=none)
```

When not specifying a binary input file, the used dataset will be randomly generated by KNNSim. Since the K-Nearest Neighbors algorithm is deterministic, the performance of KNN is not affected by the quantitative values of the coordinates from the dataset.

When using a real precompiled dataset, the necessary parameters to run it can be found at `./datasets/<dataset_name>/<dataset_name>.cfg`. For instance, to use the dataset on `./datasets/bin/7_poker_hand.bin`, the parameters can be found in `./datasets/7_poker_hand/poker.cfg`. For example:
```
./knnsim 25010 1000000 10 10 4 --run-type multithread --input-file datasets/bin/7_poker_hand.bin
```

The output can be, for instance:
```
         Hostname: morgana.uconnect.utah.edu
         Run type: 1
Number of threads: 8
 Elapsed time [s]: 66.813626
```
